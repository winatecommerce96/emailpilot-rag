var MeetingApp=(()=>{var{useState:ne,useEffect:re,useRef:oe,forwardRef:ie}=React,Q={database:"M3 3h18v18H3z M3 9h18 M3 15h18 M21 3v18 M3 3v18","building-2":"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2 M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2 M10 6h4 M10 10h4 M10 14h4 M10 18h4","chevron-down":"m6 9 6 6 6-6","chevron-left":"m15 18-6-6 6-6","chevron-right":"m9 18 6-6-6-6",check:"M20 6 9 17l-5-5","refresh-cw":"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8 M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16 M21 3v5h-5 M3 21v-5h5",search:"M19 19l-4-4m0-7A7 7 0 1 1 4 8a7 7 0 0 1 11 0z",upload:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4 M17 8l-5-5-5 5 M12 3v12","upload-cloud":"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242 M12 12v9 M8 17l4-4 4 4","file-text":"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z M14 2v6h6 M16 13H8 M16 17H8 M10 9H8","folder-plus":"M12 10v6 M9 13h6 M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z",eye:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z M12 9a3 3 0 1 0 0 6 3 3 0 0 0 0-6z",download:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4 M7 10l5 5 5-5 M12 15V3","trash-2":"M3 6h18 M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6 M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2 M10 11v6 M14 11v6","alert-circle":"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z M12 8v4 M12 16h.01","alert-triangle":"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z M12 9v4 M12 17h.01",x:"M18 6 6 18 M6 6l12 12","x-circle":"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z M15 9l-6 6 M9 9l6 6","check-circle":"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z M9 12l2 2 4-4",info:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z M12 16v-4 M12 8h.01","search-x":"M19 19l-4-4 M13.5 8.5L10.5 11.5 M10.5 8.5l3 3 M5 11a6 6 0 1 0 12 0 6 6 0 0 0-12 0z",sparkles:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z M20 3v4 M22 5h-4 M4 17v2 M5 18H3",image:"M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z M8.5 10a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z M21 15l-5-5L5 21",file:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z M14 2v6h6",code:"m8 18 4-12h4 M8 6l-4 6 4 6 M16 6l4 6-4 6",braces:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5a2 2 0 0 0 2 2h1 M16 3h1a2 2 0 0 1 2 2v5a2 2 0 0 0 2 2 2 2 0 0 0-2 2v5a2 2 0 0 1-2 2h-1",table:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",inbox:"M22 12h-6l-2 3h-4l-2-3H2 M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",library:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20 M4 4.5A2.5 2.5 0 0 1 6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15z","user-x":"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2 M8.5 3a4 4 0 1 0 0 8 4 4 0 0 0 0-8z M18 8l5 5 M23 8l-5 5",folder:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z",calendar:"M19 4H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 0V2m-14 2V2m0 6h14",plus:"M12 5v14M5 12h14",settings:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z M12 9a3 3 0 1 0 0 6 3 3 0 0 0 0-6z",user:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2 M12 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z",grid:"M3 3h7v7H3z M14 3h7v7h-7z M14 14h7v7h-7z M3 14h7v7H3z",history:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8 M3 3v5h5 M12 7v5l4 2",clock:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z M12 6v6l4 2",zap:"M13 2L3 14h9l-1 8 10-12h-9l1-8z",text:"M17 6.1H3 M21 12.1H3 M15.1 18H3","bar-chart-3":"M3 3v18h18 M18 17V9 M13 17V5 M8 17v-3","bar-chart":"M12 20V10 M18 20V4 M6 20v-4",activity:"M22 12h-4l-3 9L9 3l-3 9H2"};function c({name:e,className:a="",size:t,...r}){let s=Q[e];return s?React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t||24,height:t||24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,...r},React.createElement("path",{d:s})):(console.warn(`Icon "${e}" not found`),React.createElement("span",{className:a}))}function k({children:e,variant:a="default",size:t="default",disabled:r=!1,loading:s=!1,className:i="",onClick:n,...l}){let d="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",o={default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground hover:bg-success/90"},f={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3 text-sm",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"};return React.createElement("button",{type:"button",className:`${d} ${o[a]} ${f[t]} ${i}`,disabled:r||s,onClick:n,...l},s&&React.createElement("svg",{className:"mr-2 h-4 w-4 animate-spin",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),e)}function E({type:e="text",className:a="",error:t=!1,...r}){return React.createElement("input",{type:e,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${t?"border-destructive focus-visible:ring-destructive":""} ${a}`,...r})}function b({children:e,className:a="",hover:t=!1,...r}){return React.createElement("div",{className:`rounded-lg border bg-card text-card-foreground shadow-sm ${t?"card-hover cursor-pointer":""} ${a}`,...r},e)}function $({children:e,className:a="",...t}){return React.createElement("div",{className:`flex flex-col space-y-1.5 p-6 ${a}`,...t},e)}function _({children:e,className:a="",...t}){return React.createElement("h3",{className:`text-2xl font-semibold leading-none tracking-tight ${a}`,...t},e)}function y({children:e,className:a="",...t}){return React.createElement("div",{className:`p-6 pt-0 ${a}`,...t},e)}function M({children:e,variant:a="default",className:t="",...r}){return React.createElement("div",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors ${{default:"bg-primary text-primary-foreground hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"border border-input bg-background hover:bg-accent",success:"bg-success text-success-foreground"}[a]} ${t}`,...r},e)}function A({className:e="",...a}){return React.createElement("div",{className:`skeleton rounded-md bg-muted ${e}`,...a})}function L({children:e,variant:a="default",className:t="",...r}){return React.createElement("div",{role:"alert",className:`relative w-full rounded-lg border p-4 ${{default:"bg-background border",destructive:"border-destructive/50 text-destructive bg-destructive/10",success:"border-success/50 text-success bg-success/10",warning:"border-yellow-500/50 text-yellow-700 bg-yellow-50"}[a]} ${t}`,...r},e)}function j({children:e,className:a="",...t}){return React.createElement("h5",{className:`mb-1 font-medium leading-none tracking-tight ${a}`,...t},e)}function X({message:e,type:a="info",onClose:t}){let r={info:"bg-background border",success:"bg-success/10 border-success/50 text-success",error:"bg-destructive/10 border-destructive/50 text-destructive",warning:"bg-yellow-50 border-yellow-500/50 text-yellow-700"},s={info:"info",success:"check-circle",error:"x-circle",warning:"alert-triangle"};return React.createElement("div",{className:`flex items-center gap-3 rounded-lg border p-4 shadow-lg toast-enter ${r[a]}`},React.createElement(c,{name:s[a],className:"h-5 w-5"}),React.createElement("span",{className:"text-sm font-medium"},e),React.createElement("button",{onClick:t,className:"ml-auto rounded-md p-1 hover:bg-muted"},React.createElement(c,{name:"x",className:"h-4 w-4"})))}function B({toasts:e,onRemove:a}){return React.createElement("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2"},e.map(t=>React.createElement(X,{key:t.id,message:t.message,type:t.type,onClose:()=>a(t.id)})))}function I({size:e="default",className:a=""}){return React.createElement("svg",{className:`animate-spin ${{sm:"h-4 w-4",default:"h-6 w-6",lg:"h-8 w-8"}[e]} ${a}`,viewBox:"0 0 24 24",fill:"none"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))}var{useState:z,useEffect:le,useCallback:N,useRef:de}=React;function F(e){let[a,t]=z([]),[r,s]=z(!1),[i,n]=z(null),l=N(async(o,f="GENERAL",v=5)=>{if(!e||!o.trim())return t([]),[];s(!0),n(null);try{let u=await fetch(`${window.RAG_CONFIG?.serviceUrl||""}/api/rag/search`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({client_id:e,query:o,phase:f,k:v})});if(!u.ok)throw new Error(`Search failed: ${u.status}`);let x=await u.json();return t(x),x}catch(u){return console.error("RAG Search Error:",u),n(u.message),t([]),[]}finally{s(!1)}},[e]),d=N(()=>{t([]),n(null)},[]);return{results:a,loading:r,error:i,search:l,clear:d}}function V(){let[e,a]=z([]),t=N((d,o="info",f=5e3)=>{let v=Date.now();return a(u=>[...u,{id:v,message:d,type:o,duration:f}]),f>0&&setTimeout(()=>{a(u=>u.filter(x=>x.id!==v))},f),v},[]),r=N(d=>{a(o=>o.filter(f=>f.id!==d))},[]),s=N((d,o)=>t(d,"success",o),[t]),i=N((d,o)=>t(d,"error",o),[t]),n=N((d,o)=>t(d,"warning",o),[t]),l=N((d,o)=>t(d,"info",o),[t]);return{toasts:e,addToast:t,removeToast:r,success:s,error:i,warning:n,info:l}}var{useState:w,useEffect:q,useCallback:R}=React;function O({connected:e,onDisconnect:a}){return e?React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"flex items-center gap-2 text-success"},React.createElement("div",{className:"h-2 w-2 rounded-full bg-success animate-pulse"}),React.createElement("span",{className:"text-sm font-medium"},"Calendar Connected")),React.createElement("button",{onClick:a,className:"text-xs text-muted-foreground hover:text-destructive transition-colors underline decoration-dotted"},"Disconnect")):React.createElement("div",{className:"flex items-center gap-2 text-muted-foreground"},React.createElement("div",{className:"h-2 w-2 rounded-full bg-gray-300"}),React.createElement("span",{className:"text-sm"},"Not connected"))}function P({onConnect:e,loading:a,setLoading:t}){return React.createElement("button",{onClick:async()=>{t(!0);try{let i=await(await fetch("/api/meeting/auth",{credentials:"include"})).json();i.auth_url&&(window.location.href=i.auth_url)}catch(s){console.error("Auth start failed:",s)}finally{t(!1)}},disabled:a,className:"gsi-material-button",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:"44px",padding:"0 16px",border:"1px solid #dadce0",borderRadius:"6px",backgroundColor:"#fff",fontFamily:"'Google Sans', Roboto, Arial, sans-serif",fontSize:"14px",fontWeight:500,color:"#3c4043",cursor:a?"wait":"pointer",transition:"background-color 0.2s, box-shadow 0.2s",boxShadow:"0 1px 2px 0 rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15)",opacity:a?.7:1},onMouseOver:s=>{a||(s.currentTarget.style.boxShadow="0 1px 3px 0 rgba(60, 64, 67, 0.3), 0 4px 8px 3px rgba(60, 64, 67, 0.15)")},onMouseOut:s=>{s.currentTarget.style.boxShadow="0 1px 2px 0 rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15)"}},a?React.createElement("svg",{className:"animate-spin h-5 w-5 mr-3",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})):React.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",style:{marginRight:"10px"}},React.createElement("path",{fill:"#4285F4",d:"M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 0 0 2.38-5.88c0-.57-.05-.66-.15-1.18z"}),React.createElement("path",{fill:"#34A853",d:"M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2a4.8 4.8 0 0 1-7.18-2.54H1.83v2.07A8 8 0 0 0 8.98 17z"}),React.createElement("path",{fill:"#FBBC05",d:"M4.5 10.52a4.8 4.8 0 0 1 0-3.04V5.41H1.83a8 8 0 0 0 0 7.18l2.67-2.07z"}),React.createElement("path",{fill:"#EA4335",d:"M8.98 4.18c1.17 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 0 0 1.83 5.4L4.5 7.49a4.77 4.77 0 0 1 4.48-3.3z"})),React.createElement("span",null,"Sign in with Google"))}function G({clientId:e,clients:a=[],connected:t,onScanTriggered:r,scanStatus:s,setScanStatus:i,initialScanState:n,checkScanStatus:l}){let[d,o]=w(!1),[f,v]=w(!1),[u,x]=w({backfill:!1,domain:""}),D=async()=>{if(!e)return;let m=localStorage.getItem("meeting_session");if(!m)return;o(!0),i(null);let g=u.backfill?168:24,h=`/api/meeting/scan/${e}?session_id=${m}&lookback_hours=${g}`;u.domain&&(h+=`&client_domain=${encodeURIComponent(u.domain)}`);try{if((await fetch(h,{method:"POST",credentials:"include"})).ok)i({type:"success",message:`Scanning past ${g}h ${u.domain?"for @"+u.domain:""}...`}),r&&r();else throw new Error("Scan failed to start")}catch(S){console.error("Scan trigger failed:",S),i({type:"error",message:"Failed to trigger scan"})}finally{o(!1)}},C=async()=>{let m=localStorage.getItem("meeting_session");if(!m||!a||a.length===0)return;v(!0),i(null);let g=a.map(h=>h.client_id);try{let h=await fetch(`/api/meeting/initial-scan?session_id=${m}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_ids:g,force:!0})});if(h.ok){let S=await h.json();i({type:"success",message:`Backfill started: Scanning 60 days for ${g.length} clients...`}),setTimeout(()=>l(m),2e3),r&&r()}else{let S=await h.json();throw new Error(S.detail||"Backfill failed")}}catch(h){console.error("Backfill failed:",h),i({type:"error",message:h.message||"Failed to start backfill"})}finally{v(!1)}};if(!t)return React.createElement("div",{className:"flex items-center justify-center py-6 text-muted-foreground text-sm"},React.createElement(c,{name:"calendar",className:"h-5 w-5 mr-2 opacity-50"}),"Connect your calendar to enable scanning");let p=a.find(m=>m.client_id===e)?.name||e;return React.createElement("div",{className:"space-y-4"},n&&React.createElement("div",{className:"p-3 bg-muted/50 rounded-lg text-sm"},React.createElement("div",{className:"flex items-center justify-between mb-1"},React.createElement("span",{className:"font-medium"},"Initial Scan (60 days)"),n.initial_scan_completed?React.createElement(M,{variant:"success",className:"text-xs"},React.createElement(c,{name:"check",className:"h-3 w-3 mr-1"})," Complete"):React.createElement(M,{variant:"secondary",className:"text-xs"},React.createElement("span",{className:"h-2 w-2 bg-blue-500 rounded-full animate-pulse mr-1.5"})," In Progress")),n.clients_scanned?.length>0&&React.createElement("p",{className:"text-xs text-muted-foreground"},"Scanned: ",n.clients_scanned.join(", ")),n.last_scan_at&&React.createElement("p",{className:"text-xs text-muted-foreground"},"Last: ",new Date(n.last_scan_at).toLocaleDateString())),React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",{className:"space-y-2"},React.createElement(k,{onClick:D,loading:d,disabled:!e,variant:"outline",className:"w-full h-12"},React.createElement(c,{name:"refresh-cw",className:"h-4 w-4 mr-2"}),"Quick Scan"),React.createElement("p",{className:"text-[10px] text-muted-foreground text-center"},"Last 24h for ",e?p:"selected client")),React.createElement("div",{className:"space-y-2"},React.createElement(k,{onClick:C,loading:f,disabled:!a||a.length===0,variant:"secondary",className:"w-full h-12"},React.createElement(c,{name:"history",className:"h-4 w-4 mr-2"}),"Backfill All"),React.createElement("p",{className:"text-[10px] text-muted-foreground text-center"},"60 days for all ",a?.length||0," clients"))),React.createElement("details",{className:"group"},React.createElement("summary",{className:"flex items-center gap-2 text-xs text-muted-foreground cursor-pointer hover:text-foreground transition-colors"},React.createElement(c,{name:"settings",className:"h-3 w-3"}),"Advanced Options",React.createElement(c,{name:"chevron-right",className:"h-3 w-3 group-open:rotate-90 transition-transform"})),React.createElement("div",{className:"mt-3 p-3 bg-muted/30 rounded-lg space-y-3"},React.createElement("div",null,React.createElement("label",{className:"text-xs font-medium text-muted-foreground block mb-1"},"Filter by Domain"),React.createElement(E,{value:u.domain,onChange:m=>x(g=>({...g,domain:m.target.value})),placeholder:"e.g. roguecreamery.com",className:"h-8 text-sm"}),React.createElement("p",{className:"text-[10px] text-muted-foreground mt-1"},"Only scan meetings with attendees from this domain")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",id:"backfill-scan-option",checked:u.backfill,onChange:m=>x(g=>({...g,backfill:m.target.checked})),className:"rounded border-gray-300 text-primary focus:ring-primary"}),React.createElement("label",{htmlFor:"backfill-scan-option",className:"text-xs cursor-pointer select-none"},"Extend Quick Scan to 7 days (default: 24h)")))),s&&React.createElement(L,{variant:s.type==="error"?"destructive":"success",className:"py-2 px-3 text-sm"},React.createElement(j,{className:"font-medium mb-0 flex items-center gap-2"},React.createElement(c,{name:s.type==="error"?"alert-triangle":"check",className:"h-4 w-4"}),s.message)))}function U({clientId:e,clients:a=[]}){let[t,r]=w(""),s=F(e),i=l=>{l.preventDefault(),t.trim()&&s.search(t,"STRATEGY",5)},n=a.find(l=>l.client_id===e)?.name||e;return React.createElement("div",{className:"space-y-4"},React.createElement("form",{onSubmit:i,className:"flex gap-3"},React.createElement("div",{className:"relative flex-1"},React.createElement(c,{name:"search",className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),React.createElement(E,{value:t,onChange:l=>r(l.target.value),placeholder:"Search meeting intelligence... (e.g. 'inventory issues', 'Q4 promotions')",className:"pl-10 h-11",disabled:!e})),React.createElement(k,{type:"submit",disabled:!t.trim()||!e||s.loading,className:"h-11 px-6"},s.loading?React.createElement(I,{size:"sm"}):"Search")),s.results.length>0&&React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h4",{className:"text-sm font-medium"},s.results.length," result",s.results.length!==1?"s":"",' for "',t,'"'),React.createElement("button",{onClick:()=>{r(""),s.clear()},className:"text-xs text-muted-foreground hover:text-foreground"},"Clear")),s.results.map((l,d)=>React.createElement(b,{key:d,className:"overflow-hidden"},React.createElement(y,{className:"p-4"},React.createElement("div",{className:"flex items-start justify-between gap-4 mb-2"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(c,{name:"file-text",className:"h-4 w-4 text-muted-foreground"}),React.createElement("span",{className:"font-medium text-sm"},l.metadata?.title||"Meeting Note")),React.createElement(M,{variant:"secondary",className:"text-xs shrink-0"},Math.round(l.relevance_score*100),"% match")),React.createElement("p",{className:"text-sm text-muted-foreground line-clamp-3"},l.content),l.metadata?.date&&React.createElement("p",{className:"text-xs text-muted-foreground mt-2"},React.createElement(c,{name:"calendar",className:"h-3 w-3 inline mr-1"}),new Date(l.metadata.date).toLocaleDateString()))))),s.results.length===0&&t&&!s.loading&&s.error===null&&React.createElement("div",{className:"text-center py-8 text-muted-foreground"},React.createElement(c,{name:"search-x",className:"h-8 w-8 mx-auto mb-2 opacity-50"}),React.createElement("p",{className:"text-sm"},'No meeting intelligence found for "',t,'"'),React.createElement("p",{className:"text-xs mt-1"},"Try different keywords or run a scan to gather more data")),!e&&React.createElement("div",{className:"text-center py-8 text-muted-foreground"},React.createElement(c,{name:"user-x",className:"h-8 w-8 mx-auto mb-2 opacity-50"}),React.createElement("p",{className:"text-sm"},"Select a client to search their meeting intelligence")),e&&!t&&s.results.length===0&&React.createElement("div",{className:"text-center py-8 text-muted-foreground"},React.createElement(c,{name:"sparkles",className:"h-8 w-8 mx-auto mb-2 opacity-50"}),React.createElement("p",{className:"text-sm"},"Search ",n,"'s meeting intelligence"),React.createElement("p",{className:"text-xs mt-1"},"Find product launches, inventory issues, marketing themes, and more")))}function J({clientId:e,clients:a=[],onConnect:t,onScanTriggered:r}){let[s,i]=w(!1),[n,l]=w(!1),[d,o]=w(null),[f,v]=w(null),u=R(async C=>{try{let p=await fetch(`/api/meeting/scan-status?session_id=${C}`,{credentials:"include"});if(p.ok){let m=await p.json();v(m)}}catch(p){console.error("Failed to check scan status:",p)}},[]),x=R(async(C,p)=>{if(!p||p.length===0)return;let m=p.map(g=>g.client_id);try{let g=await fetch(`/api/meeting/initial-scan?session_id=${C}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_ids:m})});if(g.ok){let h=await g.json();o({type:"success",message:h.status==="already_completed"?"Initial scan already completed":`Started 60-day scan for ${m.length} clients...`}),r&&r()}}catch(g){console.error("Initial scan failed:",g)}},[r]);q(()=>{let p=new URLSearchParams(window.location.search).get("meeting_session");p?(localStorage.setItem("meeting_session",p),l(!0),window.history.replaceState({},document.title,window.location.pathname),t&&t(p),x(p,a)):localStorage.getItem("meeting_session")&&(l(!0),u(localStorage.getItem("meeting_session")))},[t,a,x,u]);let D=R(()=>{localStorage.removeItem("meeting_session"),l(!1),o(null),v(null)},[]);return{connected:n,loading:s,setLoading:i,scanStatus:d,setScanStatus:o,initialScanState:f,checkScanStatus:u,handleDisconnect:D,clientId:e,clients:a}}var{useState:H,useEffect:K}=React;function Y(){return typeof EmailPilotAuth<"u"?EmailPilotAuth.ready():new Promise(e=>{let a=()=>{typeof EmailPilotAuth<"u"?EmailPilotAuth.ready().then(e):setTimeout(a,100)};a()})}function Z({value:e,onChange:a,clients:t,loading:r,onRefresh:s}){return React.createElement("div",{className:"relative inline-flex items-center"},r?React.createElement("div",{className:"flex items-center gap-2 text-sm text-muted-foreground"},React.createElement("div",{className:"h-4 w-4 rounded-full border-2 border-primary border-t-transparent animate-spin"}),React.createElement("span",null,"Loading...")):React.createElement(React.Fragment,null,React.createElement(c,{name:"building-2",className:"absolute left-3 h-4 w-4 text-muted-foreground pointer-events-none z-10"}),React.createElement("select",{value:e,onChange:i=>a(i.target.value),className:"h-9 pl-9 pr-8 rounded-md border border-input bg-background text-sm focus:outline-none focus:ring-2 focus:ring-ring appearance-none cursor-pointer min-w-[200px]"},React.createElement("option",{value:""},"Select client..."),t.map(i=>React.createElement("option",{key:i.client_id,value:i.client_id},i.name||i.client_id))),React.createElement(c,{name:"chevron-down",className:"absolute right-2 h-4 w-4 text-muted-foreground pointer-events-none"})),s&&!r&&React.createElement("button",{onClick:s,className:"ml-2 p-1.5 hover:bg-accent rounded-md text-muted-foreground hover:text-foreground transition-colors",title:"Refresh clients"},React.createElement(c,{name:"refresh-cw",className:"h-4 w-4"})))}function T({step:e,label:a,active:t,completed:r,icon:s}){return React.createElement("div",{className:`flex items-center gap-2 ${t?"text-primary":r?"text-success":"text-muted-foreground"}`},React.createElement("div",{className:`
                flex items-center justify-center w-8 h-8 rounded-full border-2 transition-colors
                ${t?"border-primary bg-primary/10":r?"border-success bg-success/10":"border-muted-foreground/30 bg-muted/50"}
            `},r?React.createElement(c,{name:"check",className:"h-4 w-4"}):React.createElement(c,{name:s,className:"h-4 w-4"})),React.createElement("span",{className:`text-sm font-medium ${t?"":"opacity-70"}`},a))}function ee(){return React.createElement("details",{className:"group"},React.createElement("summary",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer hover:text-foreground transition-colors"},React.createElement(c,{name:"info",className:"h-4 w-4"}),"How it works",React.createElement(c,{name:"chevron-right",className:"h-4 w-4 group-open:rotate-90 transition-transform"})),React.createElement("div",{className:"mt-3 pl-6 space-y-2 text-sm text-muted-foreground"},React.createElement("p",null,React.createElement("strong",null,"1.")," Connect your Google Calendar with read-only access."),React.createElement("p",null,React.createElement("strong",null,"2.")," We scan past meetings with external guests."),React.createElement("p",null,React.createElement("strong",null,"3.")," Gemini analyzes transcripts for strategic signals."),React.createElement("p",null,React.createElement("strong",null,"4.")," Insights are saved to the RAG Knowledge Base for search.")))}function W(){let[e,a]=H(""),[t,r]=H([]),[s,i]=H(!0),n=J({clientId:e,clients:t,onConnect:o=>console.log("Connected",o),onScanTriggered:()=>console.log("Scan started")}),l=async()=>{i(!0);try{let f=await(await fetch("/api/clients",{credentials:"include"})).json();r(f.clients||[])}catch(o){console.error("Failed to load clients",o)}finally{i(!1)}};K(()=>{let o=!1;return(async()=>{await Y(),o||l()})(),()=>{o=!0}},[]);let d=n.connected?e?3:2:1;return React.createElement("div",{className:"container mx-auto px-4 py-6 max-w-6xl"},React.createElement("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"p-2.5 bg-blue-100 dark:bg-blue-900/20 rounded-lg text-blue-600 dark:text-blue-400"},React.createElement(c,{name:"calendar",className:"h-6 w-6"})),React.createElement("div",null,React.createElement("h1",{className:"text-xl font-bold"},"Meeting Intelligence"),React.createElement("p",{className:"text-sm text-muted-foreground"},"Harvest strategic insights from client meetings"))),React.createElement("div",{className:"flex items-center gap-4 flex-wrap"},React.createElement(Z,{value:e,onChange:a,clients:t,loading:s,onRefresh:l}),React.createElement("div",{className:"h-6 w-px bg-border hidden sm:block"}),React.createElement(O,{connected:n.connected,onDisconnect:n.handleDisconnect}))),React.createElement("div",{className:"flex items-center gap-8 mb-6 pb-6 border-b overflow-x-auto"},React.createElement(T,{step:1,label:"Connect Calendar",icon:"calendar",active:d===1,completed:n.connected}),React.createElement("div",{className:`flex-1 h-0.5 max-w-[60px] ${n.connected?"bg-success":"bg-muted"}`}),React.createElement(T,{step:2,label:"Select Client",icon:"building-2",active:d===2,completed:n.connected&&e}),React.createElement("div",{className:`flex-1 h-0.5 max-w-[60px] ${n.connected&&e?"bg-success":"bg-muted"}`}),React.createElement(T,{step:3,label:"Scan & Search",icon:"search",active:d===3,completed:!1})),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},React.createElement("div",{className:"lg:col-span-1 space-y-4"},!n.connected&&React.createElement(b,null,React.createElement($,{className:"pb-3"},React.createElement(_,{className:"text-base flex items-center gap-2"},React.createElement(c,{name:"calendar",className:"h-4 w-4"}),"Connect Calendar")),React.createElement(y,{className:"space-y-4"},React.createElement("p",{className:"text-sm text-muted-foreground"},"Connect your Google Calendar to scan meeting transcripts for strategic insights."),React.createElement(P,{onConnect:n.onConnect,loading:n.loading,setLoading:n.setLoading}),React.createElement("p",{className:"text-xs text-muted-foreground"},"Grants read-only access to Calendar events and Drive files for transcript analysis."))),n.connected&&React.createElement(b,null,React.createElement($,{className:"pb-3"},React.createElement(_,{className:"text-base flex items-center gap-2"},React.createElement(c,{name:"refresh-cw",className:"h-4 w-4"}),"Scan Meetings")),React.createElement(y,null,React.createElement(G,{clientId:e,clients:t,connected:n.connected,onScanTriggered:()=>console.log("Scan started"),scanStatus:n.scanStatus,setScanStatus:n.setScanStatus,initialScanState:n.initialScanState,checkScanStatus:n.checkScanStatus}))),React.createElement(b,{className:"bg-muted/30 border-muted"},React.createElement(y,{className:"pt-4 pb-4"},React.createElement(ee,null))),n.connected&&n.initialScanState&&React.createElement(b,null,React.createElement(y,{className:"pt-4"},React.createElement("div",{className:"grid grid-cols-2 gap-4 text-center"},React.createElement("div",null,React.createElement("div",{className:"text-2xl font-bold text-primary"},n.initialScanState.clients_scanned?.length||0),React.createElement("div",{className:"text-xs text-muted-foreground"},"Clients Scanned")),React.createElement("div",null,React.createElement("div",{className:"text-2xl font-bold text-primary"},n.initialScanState.total_meetings_processed||"-"),React.createElement("div",{className:"text-xs text-muted-foreground"},"Meetings Processed")))))),React.createElement("div",{className:"lg:col-span-2"},React.createElement(b,{className:"h-full min-h-[500px]"},React.createElement($,{className:"pb-3"},React.createElement(_,{className:"text-base flex items-center gap-2"},React.createElement(c,{name:"search",className:"h-4 w-4"}),"Search Meeting Intelligence",e&&React.createElement(M,{variant:"secondary",className:"ml-2 text-xs font-normal"},t.find(o=>o.client_id===e)?.name||e))),React.createElement(y,null,s?React.createElement("div",{className:"space-y-4"},React.createElement(A,{className:"h-11 w-full"}),React.createElement(A,{className:"h-24 w-full"}),React.createElement(A,{className:"h-24 w-full"})):React.createElement(U,{clientId:e,clients:t}))))))}function te(){let e=V();return window.toast=e,React.createElement("div",{className:"min-h-screen bg-background"},React.createElement(W,null),React.createElement(B,{toasts:e.toasts,onRemove:e.removeToast}))}var ae=document.getElementById("root"),se=ReactDOM.createRoot(ae);se.render(React.createElement(te,null));})();
