<!DOCTYPE html>
<html lang="en" data-ep-shell="true">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meeting Intelligence - Intelligence Hub</title>
    <script id="ep-tailwind-preflight-off" data-ep="tailwind-preflight-off">
        window.tailwind = window.tailwind || {};
        tailwind.config = tailwind.config || {};
        tailwind.config.corePlugins = Object.assign({}, tailwind.config.corePlugins || {}, { preflight: false });
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <!-- Local UI Shell CSS - loaded directly for reliability (no cross-origin dependency) -->
    <link rel="stylesheet" href="ui-shell.css">
    <!-- SSO Auth Controller and Impersonation dynamic load -->
    <script>
        (function () {
            const isProd = window.location.hostname.includes('run.app') || window.location.hostname.includes('emailpilot.ai');
            const orchestratorUrl = isProd ? 'https://emailpilot-orchestrator-p3cxgvcsla-uc.a.run.app' : 'http://localhost:8001';
            window.EMAILPILOT_ORCHESTRATOR_URL = orchestratorUrl;

            const authScript = document.createElement('script');
            authScript.src = `${orchestratorUrl}/static/js/auth_controller.js?v=20251215-dynamic`;
            document.head.appendChild(authScript);

            const impScript = document.createElement('script');
            impScript.src = `${orchestratorUrl}/static/js/impersonation.js?v=20251215`;
            impScript.defer = true;
            document.head.appendChild(impScript);
        })();
    </script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        border: "hsl(214.3 31.8% 91.4%)",
                        input: "hsl(214.3 31.8% 91.4%)",
                        ring: "hsl(221.2 83.2% 53.3%)",
                        background: "hsl(0 0% 100%)",
                        foreground: "hsl(222.2 84% 4.9%)",
                        primary: {
                            DEFAULT: "hsl(221.2 83.2% 53.3%)",
                            foreground: "hsl(210 40% 98%)",
                        },
                        secondary: {
                            DEFAULT: "hsl(210 40% 96.1%)",
                            foreground: "hsl(222.2 47.4% 11.2%)",
                        },
                        destructive: {
                            DEFAULT: "hsl(0 84.2% 60.2%)",
                            foreground: "hsl(210 40% 98%)",
                        },
                        muted: {
                            DEFAULT: "hsl(210 40% 96.1%)",
                            foreground: "hsl(215.4 16.3% 46.9%)",
                        },
                        accent: {
                            DEFAULT: "hsl(210 40% 96.1%)",
                            foreground: "hsl(222.2 47.4% 11.2%)",
                        },
                        success: {
                            DEFAULT: "hsl(142.1 76.2% 36.3%)",
                            foreground: "hsl(355.7 100% 97.3%)",
                        },
                    },
                    borderRadius: {
                        lg: "0.5rem",
                        md: "calc(0.5rem - 2px)",
                        sm: "calc(0.5rem - 4px)",
                    },
                    keyframes: {
                        "fade-in": {
                            "0%": { opacity: "0", transform: "translateY(-10px)" },
                            "100%": { opacity: "1", transform: "translateY(0)" }
                        },
                        "slide-in": {
                            "0%": { opacity: "0", transform: "translateX(-10px)" },
                            "100%": { opacity: "1", transform: "translateX(0)" }
                        },
                        "pulse-ring": {
                            "0%": { transform: "scale(0.95)", opacity: "1" },
                            "50%": { transform: "scale(1)", opacity: "0.7" },
                            "100%": { transform: "scale(0.95)", opacity: "1" }
                        }
                    },
                    animation: {
                        "fade-in": "fade-in 0.3s ease-out",
                        "slide-in": "slide-in 0.3s ease-out",
                        "pulse-ring": "pulse-ring 2s ease-in-out infinite"
                    }
                }
            }
        }
    </script>
    
    <!-- EP:UI-SHELL:START -->
    <script>
        (function () {
            if (window.__EP_UI_SHELL_INCLUDE__) return;
            window.__EP_UI_SHELL_INCLUDE__ = true;

            const enabled = window.__EP_ENABLE_SHELL__ === true ||
                document.documentElement.hasAttribute('data-ep-shell') ||
                document.body?.hasAttribute('data-ep-shell');

            const host = window.location.hostname;
            const isLocal = host === 'localhost' || host === '127.0.0.1';
            const base = isLocal ? 'http://localhost:8001/static' : 'https://app.emailpilot.ai/static';
            const version = '20260131';

            window.__EP_UI_SHELL_BASE__ = base;
            window.__EP_UI_SHELL_VERSION__ = version;

            const head = document.head || document.getElementsByTagName('head')[0];
            if (!head) return;

            const ensureFavicon = (rel, href, type, sizes) => {
                if (document.querySelector(`link[rel="${rel}"][href="${href}"]`)) return;
                const link = document.createElement('link');
                link.rel = rel;
                link.href = href;
                if (type) link.type = type;
                if (sizes) link.sizes = sizes;
                link.setAttribute('data-ep-favicon', 'true');
                head.appendChild(link);
            };

            ensureFavicon('icon', `${base}/assets/favicon.ico`, 'image/x-icon');
            ensureFavicon('icon', `${base}/assets/favicon-32x32.png`, 'image/png', '32x32');
            ensureFavicon('icon', `${base}/assets/favicon-16x16.png`, 'image/png', '16x16');

            if (!enabled) return;

            const hasScript = (match) => Array.from(document.scripts || []).some((script) => script.src && script.src.includes(match));
            const ensureScript = (src, key) => {
                if (document.querySelector(`script[data-ep-shell-lib="${key}"]`) || hasScript(src)) return;
                const script = document.createElement('script');
                script.src = src;
                script.setAttribute('data-ep-shell-lib', key);
                head.appendChild(script);
            };
            const ensureStylesheet = (href) => {
                if (document.querySelector(`link[data-ep-shell-css]`) || Array.from(document.querySelectorAll('link[rel="stylesheet"]')).some((link) => link.href && link.href.includes('ui-shell'))) return;
                const link = document.createElement('link');
                link.rel = 'stylesheet';
                link.href = href;
                link.setAttribute('data-ep-shell-css', 'true');
                head.appendChild(link);
            };

            ensureScript('https://cdn.tailwindcss.com', 'tailwind');
            ensureScript('https://unpkg.com/lucide@latest', 'lucide');
            ensureScript('https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js', 'gsap');
            ensureStylesheet(`${base}/ui-shell.v${version}.css?cb=20260131b`);
            ensureScript(`${base}/ui-shell.v${version}.js?cb=20260131b`, 'ui-shell');
        })();
    </script>
    <!-- EP:UI-SHELL:END -->
    
    <style id="ep-preload-style">
        html.ep-preload body { opacity: 0; }
        html.ep-ready body { opacity: 1; transition: opacity 0.35s ease; }
    </style>
    <script id="ep-style-guard" data-ep="style-guard">
        (function(){
            var STYLE_ID='ep-ultimate-style';
            var docEl=document.documentElement;
            var head=document.head;
            var revealed=false;
            function reveal(){
                if(revealed)return;
                docEl.classList.remove('ep-preload');
                docEl.classList.add('ep-ready');
                revealed=true;
            }
            function ensureLast(){
                var style=document.getElementById(STYLE_ID);
                if(!style||!head||style.parentNode!==head)return false;
                if(head.lastElementChild!==style){head.appendChild(style);}
                return head.lastElementChild===style;
            }
            function step(){
                var style=document.getElementById(STYLE_ID);
                if(!style)return;
                docEl.classList.add('ep-preload');
                ensureLast();
                if(ensureLast())reveal();
            }
            if(document.getElementById(STYLE_ID)){docEl.classList.add('ep-preload');}
            if(head){
                var obs=new MutationObserver(function(muts){
                    var touched=false;
                    outerLoop:
                    for(var i=0;i<muts.length;i++){
                        var nodes=muts[i].addedNodes;
                        for(var j=0;j<nodes.length;j++){
                            var n=nodes[j];
                            if(n.nodeType!==1)continue;
                            if(n.id===STYLE_ID||n.tagName==='STYLE'||n.tagName==='LINK'){
                                touched=true;
                                break outerLoop;
                            }
                        }
                    }
                    if(touched)step();
                });
                obs.observe(head,{childList:true});
            }
            window.addEventListener('load',function(){step();if(document.getElementById(STYLE_ID))reveal();});
            setTimeout(function(){if(document.getElementById(STYLE_ID))reveal();},4000);
        })();
    </script>
</head>

<body class="h-screen flex overflow-hidden ep-shell-lock" data-layout="ultimate">
    <div class="gradient-bg"></div>
    <div class="gradient-orbs">
        <div class="orb orb1"></div>
        <div class="orb orb2"></div>
        <div class="orb orb3"></div>
    </div>

    <!-- Sidebar injected by ui-shell.js from orchestrator -->

    <div class="main-container" data-ui="main-container">
        <div class="content-scroll" data-ui="content-scroll">
            <div class="top-header" data-ui="top-header">
                <div class="header-left">
                    <h1 class="text-5xl font-black text-gray-900 mb-4 font-display tracking-tight leading-none">
                        Intelligence Hub</h1>
                    <p class="text-[11px] font-black uppercase tracking-[0.3em] text-gray-400">Intelligence Operations
                    </p>
                    <p class="text-lg text-gray-500 font-medium mt-2">Centralized knowledge base for strategy, assets, and client intelligence.</p>
                </div>
                <div class="header-actions flex items-center gap-8" data-ui="header-actions">
                    <div class="search-bar bg-white/80 border border-gray-200 rounded-2xl px-6 py-4 flex items-center gap-4 shadow-sm transition-all duration-500 focus-within:ring-4 focus-within:ring-blue-500/5 focus-within:border-blue-200"
                        data-ui="search">
                        <i data-lucide="search" class="w-5 h-5 text-gray-400"></i>
                        <input type="text" placeholder="Search documents, embeddings, collections..."
                            aria-label="Search documents, embeddings, collections..."
                            class="bg-transparent border-none outline-none text-base w-full text-gray-700 font-medium placeholder:text-gray-400">
                    </div>
                </div>
            </div>
            <!-- Navigation Header -->
            <nav class="bg-white border-b border-gray-200 px-4 py-3">
                <div class="max-w-7xl mx-auto flex items-center justify-between">
                    <div class="flex items-center space-x-6">
                        <h1 class="text-lg font-semibold text-gray-900">Intelligence Tools</h1>
                        <div class="flex items-center space-x-4">
                            <a href="/ui/" class="px-3 py-2 text-sm font-medium text-gray-600 hover:text-indigo-600 transition-colors flex items-center gap-1.5">
                                Document Manager
                            </a>
                            <a href="/ui/image-repository.html"
                                class="text-sm font-medium text-gray-600 hover:text-pink-600 transition-colors flex items-center gap-1.5">
                                <i data-lucide="image" class="w-4 h-4"></i>
                                Visual Intelligence
                            </a>
                            <a href="/ui/meeting-intelligence.html"
                                class="text-sm font-medium text-blue-600 border-b-2 border-blue-600 pb-1 flex items-center gap-1.5">
                                <i data-lucide="calendar" class="w-4 h-4"></i>
                                Meeting Intelligence
                            </a>
                            <a href="/ui/email-repository.html"
                                class="text-sm font-medium text-gray-600 hover:text-blue-600 transition-colors flex items-center gap-1.5">
                                <i data-lucide="mail" class="w-4 h-4"></i>
                                Email Intelligence
                            </a>
                            <a href="/ui/email-review.html"
                                class="text-sm font-medium text-gray-600 hover:text-orange-600 transition-colors flex items-center gap-1.5">
                                <i data-lucide="clipboard-check" class="w-4 h-4"></i>
                                Email Review
                            </a>
                            <a href="/ui/figma-feedback.html"
                                class="text-sm font-medium text-gray-600 hover:text-indigo-600 transition-colors flex items-center gap-1.5">
                                <i data-lucide="message-square" class="w-4 h-4"></i>
                                Figma Feedback
                            </a>
                        </div>
                    </div>
                    <div id="shell-auth-chip"></div>
                </div>
            </nav>
            <script>
                (function () {
                    async function setupAuth() {
                        if (typeof EmailPilotAuth === 'undefined') {
                            setTimeout(setupAuth, 100);
                            return;
                        }
                        await EmailPilotAuth.ready();
                        EmailPilotAuth.subscribe((user) => {
                            const chip = document.getElementById('shell-auth-chip');
                            if (user && chip) {
                                chip.innerHTML = `
                            <div class="flex items-center space-x-2 bg-gray-50 px-3 py-1.5 rounded-lg border border-gray-200">
                                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                                <span class="text-xs font-medium text-gray-700">${user.email}</span>
                            </div>
                        `;
                            }
                        });
                    }
                    setupAuth();
                })();
            </script>
            <script>lucide.createIcons();</script>

            <div id="root"></div>

            <!-- Configuration -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="dist/meeting-app.js?v=1"></script>
</body>
</html>
